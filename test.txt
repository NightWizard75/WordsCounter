# Docker
üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò
üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò üêò

’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂
’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂ ’à’≤’ª’∏÷Ç’µ’∂

____
–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `>start_copy.bat` –¥–ª—è windows –∏–ª–∏ ` >./start_copy.sh ` –¥–ª—è linux
–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Å–∫–æ–ø–∏—Ä—É—é—Ç—Å—è —Ç—Ä–µ–±—É–µ–º—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Ö —Å–ª–µ–¥—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:
- **.env** (~–ü—Ä–∏–º–µ—Ä `.env.example`)
- **.gitignore** (~–ü—Ä–∏–º–µ—Ä `.gitignore.example`)
- **docker-compose.yml** (~–ü—Ä–∏–º–µ—Ä `docker-compose.yml.bak`)

–î–∞–ª–µ–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É https://
–î–ª—è —ç—Ç–æ–≥–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è ` >run.bat ` –¥–ª—è windows –∏–ª–∏ ` >./run.sh ` –¥–ª—è linux

### –ù–∞–±–æ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã
| –û–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ | –ü—É—Ç—å –∫ dockerfile | –û–ø–∏—Å–∞–Ω–∏–µ |
|----|:----:|:----|
| `>app`| ./fpm |–∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ |
| `>workspace` | ./workspace | –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ª—É–∂–µ–±–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (composer, npm –∏ —Ç.–¥)  |
| `>webserver`| ./nginx | webserver –ø—Ä–æ–µ–∫—Ç–∞ |
| `>mysql-master`| –ò–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è | –º–∞—Å—Ç–µ—Ä –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Mysql |
| `>mysql-slave`| –ò–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è | slave –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Mysql |
| `>postgres`| –ò–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è | –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Postgres |
| `>redis`| ./redis | –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Redis |
| `>elasticsearch`| –ò–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è | –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Elasticsearch |
| `>memcached`| ./memcached | –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –≥–¥–µ –∫—Ä—É—Ç–∏—Ç—å—Å—è memcached |

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–∞–ø–æ–∫
- [code](./code) (–ú–µ—Å—Ç–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ –∫–æ–¥–∞)
  - [application.loc](./code/application.loc) - –∫–æ–¥ –¥–ª—è —Å–∞–π—Ç–∞ `application.loc`.
    –≠—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –ø–∞–ø–∫–∞, –Ω–∞—Ö–æ–¥—è—â–∞—è—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ ./code, –≤ –∫–æ—Ç–æ—Ä–æ–π –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –≥–∏—Ç–æ–º (MyDock)
  - [otus.loc](./code/otus.loc) - –∫–æ–¥ –¥–ª—è —Å–∞–π—Ç–∞ `otus.loc`
    (–î–ª—è —Ä–∞–±–æ—Ç—ã —Å–∞–π—Ç–∞ otus.loc –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥ `/otus.loc` –≤ –ø–∞–ø–∫–µ
    –Ω–∞ –∫–æ—Ç–æ—Ä—É—é —É–∫–∞–∑—ã–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `CODE` –∏–∑ —Ñ–∞–π–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ `.env`. –ù–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ –ø–∞–ø–∫—É `./code`.
    –ü–∞–ø–∫–∞ `./code/otus.loc`–Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –≥–∏—Ç–æ–º (MyDock), –ø–æ—ç—Ç–æ–º—É –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–¥ –∏–∑ –¥—Ä—É–≥–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)
    - [valyakin.loc](./code/valyakin.loc) - –∫–æ–¥ –¥–ª—è —Å–∞–π—Ç–∞ `valyakin.loc`
    (–î–ª—è —Ä–∞–±–æ—Ç—ã —Å–∞–π—Ç–∞ valyakin.loc –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥ `/valyakin.loc` –≤ –ø–∞–ø–∫–µ
    –Ω–∞ –∫–æ—Ç–æ—Ä—É—é —É–∫–∞–∑—ã–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `CODE` –∏–∑ —Ñ–∞–π–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ `.env`. –ù–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ –ø–∞–ø–∫—É `./code`.
    –ü–∞–ø–∫–∞ `./code/valyakin.loc`–Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –≥–∏—Ç–æ–º (MyDock), –ø–æ—ç—Ç–æ–º—É –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–¥ –∏–∑ –¥—Ä—É–≥–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)
- [fpm](./fpm) - –ø–∞–ø–∫–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `app`
- [memcached](./memcached) - –ø–∞–ø–∫–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `memcached`
- [mysql](./mysql) - –ø–∞–ø–∫–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ `mysql-master` –∏ `mysql-slave`
- [nginx](./nginx) - –ø–∞–ø–∫–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `webserver`
    - [hosts](./nginx/hosts) - –º–µ—Å—Ç–æ, –≥–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Å–∞–π—Ç–æ–≤
- [redis](./redis) - –ø–∞–ø–∫–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `redis`
- [workspace](./workspace) - –ø–∞–ø–∫–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `workspace`
  - [scripts](workspace/scripts) - –ø–∞–ø–∫–∞ —Å–æ —Å–∫—Ä–∏–ø—Ç–∞–º–∏
    - [certificate](workspace/scripts/certificate) - —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —Å–∞–π—Ç–∞
      - `./create_root_ca.sh` - —Å–æ–∑–¥–∞–µ—Ç –∫–æ—Ä–Ω–µ–≤–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –¥–ª—è –Ω–µ–≥–æ –∫–ª—é—á–µ–º
      - `./create_certicicate_for_domain.sh mysite.loca` - —Å–æ–∑–¥–∞–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è —Å–∞–π—Ç–∞ —Å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∫–ª—é—á–µ–º –¥–ª—è –≤—Å–µ—Ö —Å–∞–π—Ç–æ–≤ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –±—ã–ª–æ)
- [_logs](./_logs) (–õ–æ–≥–∏) –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–∞—Ä–∞–º–∞—Ç—Ä–æ–º `LOGS=./_logs` –≤ —Ñ–∞–π–ª–µ .env
  - [memprof](_logs/memprof) - –ø—É—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ memprof –±–µ—Ä–µ—Ç—Å—è –∏–∑ `$_SERVER['MEMPROF_LOG_PATH']`
  ```
   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ –Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–∞–∫:
   $memprofPath = $_SERVER['MEMPROF_LOG_PATH'];
   memprof_dump_callgrind(fopen($memprofPath."memprof_logs.out", "w"));
  ```
  - [mysql](_logs/mysql) - —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ª–æ–≥–æ–≤ Mysql (/master, /slave)
  - [nginx](_logs/nginx) - —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ª–æ–≥–æ–≤ Nginx
  - [php_errors](_logs/php_errors) - —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –æ—à–∏–±–æ–∫ PHP
  - [redis](_logs/redis) - —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ª–æ–≥–æ–≤ redis
  - [xdebug](_logs/x-debug) - —Ä–∞—Å–æ–ø–ª–æ–∂–µ–Ω–∏–µ –ª–æ–≥–æ–≤ x-debug
- [ZoneForSTORAGE](./ZoneForSTORAGE) (–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö) –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–∞—Ä–∞–º–∞—Ç—Ä–æ–º STORAGE=./ZoneForSTORAGE –≤ —Ñ–∞–π–ª–µ .env
    - certificates - –º–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –¥–ª—è —Å–∞–π—Ç–æ–≤ + –∫–æ—Ä–Ω–µ–≤–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
    - docker
      - elasticsearch
          - data
              - nodes
                  - 0 - `–Ω—É–ª–µ–≤–∞—è –Ω–æ–¥–∞ —É —ç–ª–∞—Å—Ç–∏–∫–∏`
      - mysql1 - `–ú–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö Mysql-master`
      - mysql2 - `–ú–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö Mysql-slave`
      - postgres - `–ú–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö Postgres`
      - redis - `–ú–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö redis`
      - sock - `–ú–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è unix-socket`

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–∏–ª–∏—Å—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ª–∏–±–æ –¥–æ –£—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –ª–∏–±–æ –ø—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –¥–æ–±–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –Ω—É–∂–Ω—É—é –ø–∞–ø–∫—É.
–≠—Ç–æ—Ç —Å–ø–æ—Å–æ–± –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è. –õ—É—á—à–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ –±–µ–∫–∞–ø–∞!!!
–ï—Å–ª–∏ –Ω–µ –±—É–¥–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏ –ø–∞–ø–æ–∫ `elasticsearch`, `mysql1`, `mysql2`, `postgres`, `sock` - —Ç–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
–æ–Ω–∏ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã. –ò –≤ –Ω–∏—Ö –ø–æ—è–≤—è—Ç—Å—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∏–∑ —Ñ–∞–π–ª–∞ .env

–í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ Workplace /srv/scripts/certificate –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è ssl —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –¥–ª—è —Å–∞–π—Ç–∞ –µ—Å—Ç—å 2 —Å–∫—Ä–∏–ø—Ç–∞
- create_root_ca.sh - —Å–æ–∑–¥–∞–µ—Ç –∫–æ—Ä–Ω–µ–≤–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- create_certifivate_for_domain.sh - —Å–æ–∑–¥–∞–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è —Å–∞–π—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∫—Ä–∏–ø—Ç–∞

`/srv/scripts/start.sh` - –∑–∞–ø—É—Å–∫–∞–µ—Ç –∏—Ö –ø–æ–æ—á–µ—Ä–µ–¥–∏.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ .env

>#### environment ################
|–ü–∞—Ä–∞–º–µ—Ç—Ä|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|----|----|
|TIMEZONE=Europe/Moscow| –ó–æ–Ω–∞ –≤—Ä–µ–º–µ–Ω–∏, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º–∞—è –Ω–∞ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã |

>#### sites ######################
|–ü–∞—Ä–∞–º–µ—Ç—Ä|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|----|----|
|SITES_ENABLED_PATH=./nginx/hosts| –ú–µ—Å—Ç–æ –Ω–∞ —Ö–æ—Å—Ç–µ, –≥–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –ø–∞–ø–∫–∏ sites-enabled –í–µ–±-—Å–µ—Ä–≤–µ—Ä–∞. |

–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–ª–æ–∂–∏—Ç—å –≤ —ç—Ç—É –ø–∞–ø–∫—É –Ω–æ–≤—ã–π, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ñ–∞–π–ª —Ç–∏–ø–∞ `newsite.loc.conf`,
–≤ ./code —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å –∫–æ–¥–æ–º,
—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤ —Ñ–∞–π–ª–µ `hosts` —Å–≤—è–∑—å –¥–æ–º–µ–Ω–Ω–æ–≥–æ –∏–º–µ–Ω–∏ —Å localhost,
–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ –≥–æ—Ç–æ–≤–æ. –ú–æ–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–æ–≤—ã–º –¥–æ–º–µ–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º `http://newsite.loc`

>#### IDE ########################
|–ü–∞—Ä–∞–º–µ—Ç—Ä|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|----|----|
|PHP_IDE_CONFIG=serverName=Docker| –ò–º—è —Å–µ—Ä–≤–µ—Ä–∞ –≤ IDE, –¥–ª—è —Ä–µ–∂–∏–º–∞ –ø–æ—à–∞–≥–æ–≤–æ–π –æ—Ç–ª–∞–¥–∫–∏ x-debug, –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º –≤ serverName |

>#### PATH ########################
|–ü–∞—Ä–∞–º–µ—Ç—Ä|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|----|----|
|LOGS=./_logs| –ö–æ—Ä–Ω–µ–≤–∞—è –ø–∞–ø–∫–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤. –ï–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö –ª–æ–≥–æ–≤ –≤ –¥—Ä—É–≥–æ–µ –º–µ—Å—Ç–æ |
|STORAGE=./ZoneForSTORAGE| –ö–æ—Ä–Ω–µ–≤–∞—è –ø–∞–ø–∫–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. –¢–∞–∫–∏—Ö –∫–∞–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —é–Ω–∏–∫—Å —Å–æ–∫–µ—Ç–∞ |
|CERTIFICATES=${STORAGE}/certificates| –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–ª—é—á–µ–π –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –¥–ª—è —Å–∞–π—Ç–æ–≤ |
|ADDITIONAL_CODE_PATH_HOST=c:/MyWork/School/Otus/HomeWork| –û—Ç–¥–µ–ª—å–Ω–∞—è –ø–∞–ø–∫–∞ —Å –∫–æ–¥–æ–º –¥–ª—è —Å–∞–π—Ç–∞, –∫–æ–¥ –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ /code |
|ADDITIONAL_SITE_NAME=homework.otus| –ò–º—è —Å–∞–π—Ç–∞, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –¥–ª—è ADDITIONAL_CODE_PATH_HOST. –¢–∞–∫ –∂–µ –µ–≥–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ —Ö–æ—Å—Ç–∞—Ö nginx |
|WORKSPACE_SCRIPTS_PATH_HOST=./workspace/scripts| –ü–∞–ø–∫–∞ —Å–æ —Å–∫—Ä–∏–ø—Ç–∞–º–∏ –Ω–∞ —Ö–æ—Å—Ç–µ |
|WORKSPACE_SCRIPTS_PATH_DOCKER=/srv/scripts| –ü–∞–ø–∫–∞ —Å–æ —Å–∫—Ä–∏–ø—Ç–∞–º–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ |

>#### code #######################
|–ü–∞—Ä–∞–º–µ—Ç—Ä|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|----|----|
|PHP_VERSION=8.0| –≤–µ—Ä—Å–∏—è PHP |
|APP_CODE_PATH_HOST=./code| –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–∏ —Å –∫–æ–¥–æ–º –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞ —Ö–æ—Å—Ç–µ |
|APP_CODE_PATH_DOCKER=/var/www/html| –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–∏ —Å –∫–æ–¥–æ–º –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö |
|PHP_ERROR_LOG_PATH=${LOGS}/php_errors/| –ú–µ—Å—Ç–æ —Å–∫–ª–∞–¥—ã–≤–∞–Ω–∏—è –ª–æ–≥–æ–≤ –æ—à–∏–±–æ–∫ PHP |

>#### nginx ######################
|–ü–∞—Ä–∞–º–µ—Ç—Ä|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|----|----|
|NGINX_LOG_PATH=${LOGS}/nginx| –ú–µ—Å—Ç–æ —Å–∫–ª–∞–¥—ã–≤–∞–Ω–∏—è –ª–æ–≥–æ–≤ webserver-–∞ |
|NGINX_SSL_PATH_DOCKER=/etc/nginx/ssl| –ü–∞–ø–∫–∞ —Å –∫–ª—é—á–∞–º–∏ –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ |

>#### x-debug
|–ü–∞—Ä–∞–º–µ—Ç—Ä|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|----|----|
|X_DEBUG=1|–ø—Ä–∏ true –∏–ª–∏ 1 –≤–∫–ª—é—á–∞–µ—Ç—Å—è x-debug|
|X_DEBUG_ERROR_LOG_PATH=${LOGS}/x-debug/| –ú–µ—Å—Ç–æ —Å–∫–ª–∞–¥—ã–≤–∞–Ω–∏—è –ª–æ–≥–æ–≤ x-Debug |

>#### memprof
|–ü–∞—Ä–∞–º–µ—Ç—Ä|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|----|----|
|MEMPROF_PROFILE_ENABLE=1| —Ç–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏–µ null –æ—Ç–∫–ª—é—á–∞–µ—Ç Memprof |
|MEMPROF_LOG_PATH_HOST=${LOGS}/memprof| –ø—É—Ç—å –¥–ª—è –ª–æ–≥–∞ memprof –Ω–∞ —Ö–æ—Å—Ç–µ |
|MEMPROF_LOG_PATH_DOCKER=/var/log/memprof/| –ø—É—Ç—å –¥–ª—è –ª–æ–≥–∞ memprof –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ |

>#### unix socket
|–ü–∞—Ä–∞–º–µ—Ç—Ä|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|----|----|
|UNIX_SOCKET_PATH_HOST=${STORAGE}/docker/sock| –ø—É—Ç—å –¥–ª—è —Ñ–∞–π–ª–∞ —Å–æ–∫–µ—Ç–∞ –Ω–∞ —Ö–æ—Å—Ç–µ |
|UNIX_SOCKET_PATH_DOCKER=/sock| –ø—É—Ç—å –¥–ª—è —Ñ–∞–π–ª–∞ —Å–æ–∫–µ—Ç–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ |

>#### mysql-Master
|–ü–∞—Ä–∞–º–µ—Ç—Ä|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|----|----|
|MYSQL_MASTER_DB=laravel| –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö mysql-master |
|MYSQL_MASTER_ROOT_PASSWORD=password| –ø–∞—Ä–æ–ª—å |
|MYSQL_MASTER_STORAGE_PLACE=${STORAGE}/docker/mysql1| –ø—É—Ç—å –∫ –∫–∞—Ç–∞–ª–æ–≥—É —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö |
|MYSQL_MASTER_LOG_PATH_HOST=${LOGS}/mysql/master| –ú–µ—Å—Ç–æ –≥–¥–µ –º–æ–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –Ω–∞ —Ö–æ—Å—Ç–µ |
|MYSQL_MASTER_LOG_PATH_DOCKER=/var/log/mysql/| –ú–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è MySql –ª–æ–≥–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ |
|MYSQL_SLAVE_CONFIG_PATH_HOST=./mysql/conf| –ú–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ MySql |

>#### mysql-Slave
|–ü–∞—Ä–∞–º–µ—Ç—Ä|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|----|----|
|MYSQL_SLAVE_DB=laravel| –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö mysql-slave |
|MYSQL_SLAVE_ROOT_PASSWORD=password| –ø–∞—Ä–æ–ª—å |
|MYSQL_SLAVE_STORAGE_PLACE=${STORAGE}/docker/mysql2| –ø—É—Ç—å –∫ –∫–∞—Ç–∞–ª–æ–≥—É —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö |
|MYSQL_SLAVE_LOG_PATH_HOST=${LOGS}/mysql/master| –ú–µ—Å—Ç–æ –≥–¥–µ –º–æ–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –Ω–∞ —Ö–æ—Å—Ç–µ |
|MYSQL_SLAVE_LOG_PATH_DOCKER=/var/log/mysql/| –ú–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è MySql –ª–æ–≥–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ |
|MYSQL_SLAVE_CONFIG_PATH_HOST=./mysql/conf| –ú–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ MySql |

>#### postgres
|–ü–∞—Ä–∞–º–µ—Ç—Ä|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|----|----|
|PGSQL_DB_NAME=postgres| –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Postgres - –∑–∞–¥–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –µ—Å–ª–∏ –±–∞–∑—ã –Ω–µ—Ç |
|PGSQL_DB_USER=postgres| –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - –∑–∞–¥–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –µ—Å–ª–∏ –±–∞–∑—ã –Ω–µ—Ç |
|PGSQL_DB_PASSWORD=password| –ø–∞—Ä–æ–ª—å - –∑–∞–¥–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –µ—Å–ª–∏ –±–∞–∑—ã –Ω–µ—Ç |
|PGSQL_STORAGE_PLACE=${STORAGE}/docker/postgres/data| –ø—É—Ç—å –∫ –∫–∞—Ç–∞–ª–æ–≥—É —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö |

>#### Redis
|–ü–∞—Ä–∞–º–µ—Ç—Ä|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|----|----|
|REDIS_CONF=./redis/conf/redis/etc|–º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ redis|
|REDIS_DATA=${STORAGE}/docker/redis/data| –ø—É—Ç—å –∫ –∫–∞—Ç–∞–ª–æ–≥—É —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö |
|REDIS_LOG=${LOGS}/docker/redis/|  –ø—É—Ç—å –∫ –∫–∞—Ç–∞–ª–æ–≥—É –ª–æ–≥–æ–≤ |

>#### Elasticsearch
|–ü–∞—Ä–∞–º–µ—Ç—Ä|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|
|----|----|
|ELASTICSEARCH_DATA=${STORAGE}/docker/elasticsearch/data| –ø—É—Ç—å –∫ –∫–∞—Ç–∞–ª–æ–≥—É —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö |